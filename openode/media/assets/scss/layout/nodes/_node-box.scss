// ==========================================================================
// Title:        Node Box
// ==========================================================================


// Variables for spacing of 'Node Box'
$node-box-spacing: $global-spacing !default;

// Variables for spacing of 'Top Level Node'
$node-box-top-level-bg: $navy-blue !default;
$node-box-top-level-border-width: none !default;
$node-box-top-level-border-style: none !default;
$node-box-top-level-border-color: none !default;

// Variables for spacing of 'Sub Level Node'
$node-box-sub-level-bg: $white !default;
$node-box-sub-level-border-width: $global-border-width !default;
$node-box-sub-level-border-style: $global-border-style !default;
$node-box-sub-level-border-color: $global-border-color !default;

// Variables for 'Expand Control Button'
$node-box-expand-control-bg: $white !default;
$node-box-expand-control-color: $node-box-parent-bg !default;
$node-box-expand-control-size: rem-calc(30px) !default;
$node-box-expand-control-font-size: rem-calc(18px) !default;


.node.top-level {

    // Anim expanding top-levels
    transform: translateZ(0); // Safari fix

    .node-box-content {
        .node-title {
            color: $white;
        }
    }
}


.node.sub-level {
    @include border-width(null $node-box-sub-level-border-width null $node-box-sub-level-border-width);
    @include border-style(null $node-box-sub-level-border-style null $node-box-sub-level-border-style);
    @include border-color(null $node-box-sub-level-border-color null $node-box-sub-level-border-color);

    // Anim expanding sub-levels
    transform: translateZ(0); // Safari fix
    
    .node-box {
        @extend .animate-fast;
        @extend .zoomInY;
    }

    .node-box-content {
        color: $white;
    }
}

.node-box {

    &.category.level-0 {
        background: $node-box-top-level-bg;        

        a {
            color: $white;
        }
    }

    // Generate styles Sub Levels
    @include content-levels($minLevel: 1, 
        $maxLevels: 10, 
        $step: strip-unit(rem-to-px($node-box-spacing)), 
        $levelSelector: '&.level', 
        $contentSelector: '.node-box-content'
    ) {
        background: $node-box-sub-level-bg;
        @include border-width(null null $node-box-sub-level-border-width null);
        @include border-style(null null $node-box-sub-level-border-style null);
        @include border-color(null null $node-box-sub-level-border-color null);

        .node-expand-control {
            border: 1px solid $icon-color;
        }
    }
}

.node-expand-control {
    transition: all .2s;

    display: inline-block;
    width: $node-box-expand-control-size;
    height: $node-box-expand-control-size;
    line-height: $node-box-expand-control-size + rem-calc(1px);
    text-align: center;

    background: $node-box-expand-control-bg;
    border-radius: 50%;
    border: 1px solid $node-box-expand-control-bg;

    font: {
        family: $icon-font;
    }

    &:before {
        font-size: $node-box-expand-control-font-size;
        color: $node-box-expand-control-color;
    }

    &:hover, &:focus, &:active {
        transform: scale(1.2);
    }

    &:active {
        transform: scale(1);   
    }
}

.node-title-wrapper {
    &.open .node-expand-control:before {
        content: 'j';        
    }

    &.closed .node-expand-control:before {
        content: 'l';        
    }
}



